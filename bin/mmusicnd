#!/bin/env python

import socket 
import os

mmusicd = "mmusicd"

host = ''
port = 4444

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.bind((host, port))
sock.listen(1)

while 1:
    con, addr = sock.accept()

    data = con.recv(1024)

    command = mmusicd + " " + data.decode("utf-8")

    output = os.popen(command)
   
    for line in output.readlines():
        con.sendall(unicode(line, errors='ignore'))

    con.sendall(u"")
    
    output.close()
    con.close()
